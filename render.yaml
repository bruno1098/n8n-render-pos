services:
  - type: web
    name: n8n
    env: docker
    plan: free
    autoDeploy: true
    region: oregon
    dockerfilePath: Dockerfile
    envVars:
      - key: N8N_BASIC_AUTH_ACTIVE
        value: true
      - key: N8N_BASIC_AUTH_USER
        value: admin
      - key: N8N_BASIC_AUTH_PASSWORD
        value: admin123
      - key: TZ
        value: America/Sao_Paulo

      # ✅ Conexão via URL com SSL habilitado (método garantido)
      - key: DB_POSTGRESDB_CONNECTION_STRING
        value: postgresql://n8n:uJYxHmNwvQ5hf7FOP3grUtIRnp85ffqK@dpg-d20ja7be5dus73dfthhg-a.oregon-postgres.render.com/n8n_4ib5?ssl=true


      # ✅ Segurança de permissões do arquivo de config
      - key: N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS
        value: true
